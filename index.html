<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artisan Bread Calculator</title>
    <meta name="description" content="Professional dough scaling, levain, and temperature calculator.">
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <main class="app-container">
        <header>
            <h1>Artisan Bread Calc</h1>
            <p class="subtitle">Advanced Baker's Math</p>
        </header>

        <section class="card" aria-labelledby="form-title">
            <h2 id="form-title">Dough Formulation</h2>
            
            <div id="validation-msg" class="validation-box hidden" role="alert"></div>

            <div class="input-group">
                <label for="recipe-preset">Recipe Preset</label>
                <select id="recipe-preset">
                    <option value="">-- Custom Ratio --</option>
                    <option value="sourdough">Classic Sourdough</option>
                    <option value="focaccia">Focaccia (High Hydration)</option>
                    <option value="pizza">Neapolitan Pizza</option>
                    <option value="bagel">NY Style Bagel</option>
                    <option value="ciabatta">Ciabatta</option>
                    <option value="wholewheat">Whole Wheat (Thirsty)</option>
                </select>
                <div id="recipe-tip" class="tip-box hidden"></div>
            </div>

            <hr class="subtle-divider">

            <div class="mode-toggle-group">
                <label id="mode-label">Calculation Mode:</label>
                <div class="radio-group" role="radiogroup" aria-labelledby="mode-label">
                    <label class="radio-btn">
                        <input type="radio" name="calc-mode" value="flour" checked> 
                        <span>By Flour</span>
                    </label>
                    <label class="radio-btn">
                        <input type="radio" name="calc-mode" value="dough"> 
                        <span>Total Dough</span>
                    </label>
                    <label class="radio-btn">
                        <input type="radio" name="calc-mode" value="batch"> 
                        <span>Batch Count</span>
                    </label>
                </div>
            </div>

            <div id="input-mode-flour" class="input-group mode-box">
                <label for="weight-flour">Total Flour (g)</label>
                <input type="number" id="weight-flour" value="1000" inputmode="numeric" placeholder="e.g. 1000">
            </div>

            <div id="input-mode-dough" class="input-group mode-box hidden">
                <label for="weight-dough">Target Total Weight (g)</label>
                <input type="number" id="weight-dough" value="1000" inputmode="numeric" placeholder="e.g. 1000">
            </div>

            <div id="input-mode-batch" class="split-inputs mode-box hidden">
                <div class="input-group">
                    <label for="batch-count">Quantity</label>
                    <input type="number" id="batch-count" value="4" inputmode="numeric">
                </div>
                <div class="input-group">
                    <label for="batch-unit">Weight/Unit (g)</label>
                    <input type="number" id="batch-unit" value="280" inputmode="numeric">
                </div>
            </div>

            <div class="split-inputs">
                <div class="input-group">
                    <label for="hydration">Water (Added) %</label>
                    <input type="number" id="hydration" value="75" inputmode="numeric">
                </div>
                <div class="input-group">
                    <label for="salt">Salt %</label>
                    <input type="number" id="salt" value="2" inputmode="numeric">
                </div>
            </div>

            <div class="split-inputs">
                 <div class="input-group">
                    <label for="starter">Starter %</label>
                    <input type="number" id="starter" value="20" inputmode="numeric">
                </div>
                <div class="input-group">
                    <label for="starter-hydration" title="Hydration of your starter (usually 100%)">Starter Hydration %</label>
                    <input type="number" id="starter-hydration" value="100" inputmode="numeric">
                </div>
            </div>

            <div id="true-hydration-badge" class="badge hidden" aria-live="polite">
                True Hydration*: <span id="true-val">76%</span> <span id="hydration-desc"></span>
            </div>

            <button id="calculate-btn">Calculate Recipe</button>
        </section>

        <section class="card results-section hidden" id="results" aria-live="polite">
            <h2>Final Recipe</h2>
            <div class="result-row"><span>Flour</span> <span id="res-flour">0g</span></div>
            <div class="result-row"><span>Water</span> <span id="res-water">0g</span></div>
            <div class="result-row"><span>Salt</span> <span id="res-salt">0g</span></div>
            <div class="result-row"><span>Starter</span> <span id="res-starter">0g</span></div>
            <hr>
            <div class="result-row total"><span>Total Batch</span> <span id="res-total">0g</span></div>

            <div id="levain-section" class="levain-builder hidden">
                <h3>Levain Builder</h3>
                <p class="levain-intro">To get <span id="levain-needed">0g</span> starter:</p>
                
                <div class="input-group small-group">
                    <label for="levain-ratio">Feed Ratio</label>
                    <select id="levain-ratio">
                        <option value="1">1:1:1 (Fast / 3-4 hrs)</option>
                        <option value="2">1:2:2 (Standard / 6-8 hrs)</option>
                        <option value="5" selected>1:5:5 (Overnight / 12 hrs)</option>
                    </select>
                </div>

                <div class="levain-grid">
                    <div><span>Seed</span><strong id="lv-seed">0g</strong></div>
                    <div><span>Flour</span><strong id="lv-flour">0g</strong></div>
                    <div><span>Water</span><strong id="lv-water">0g</strong></div>
                </div>
            </div>
        </section>

        <section class="card temp-card">
            <h2 id="temp-header" class="collapsible-header" tabindex="0" role="button" aria-expanded="false">
                Temp. Calculator <span>▼</span>
            </h2>
            <div id="temp-content" class="hidden-content">
                <p class="tip-text">Calculate required water temp for Target Dough Temp (DDT).</p>
                
                <div class="split-inputs">
                    <div class="input-group"><label for="temp-room">Room °C</label><input type="number" id="temp-room" placeholder="21"></div>
                    <div class="input-group"><label for="temp-flour">Flour °C</label><input type="number" id="temp-flour" placeholder="21"></div>
                </div>
                
                <div class="split-inputs">
                    <div class="input-group"><label for="temp-friction">Friction °C</label><input type="number" id="temp-friction" value="5"></div>
                    <div class="input-group"><label for="temp-target">Target °C</label><input type="number" id="temp-target" value="26"></div>
                </div>

                <div class="result-row total" style="margin-top:1rem;">
                    <span>Use Water At:</span>
                    <span id="res-temp-water">--°C</span>
                </div>
                <button id="calc-temp-btn" class="secondary-btn">Calculate Temp</button>
            </div>
        </section>

        <footer><small>&copy; Artisan Web Tools</small></footer>
    </main>
    <script src="app.js"></script>
</body>
</html>
